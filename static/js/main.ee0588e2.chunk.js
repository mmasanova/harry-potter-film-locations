(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n.p+"static/media/powered-by-foursquare-grey.36766770.svg"},,function(e,t,n){e.exports=n.p+"static/media/place.d89191a6.svg"},function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(6),r=n.n(i),c=(n(15),n(1)),l=n(2),s=n(4),u=n(3),d=n(5),m=function(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("")},f=["click","mouseover"],v=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.marker&&this.marker.setMap(null)}},{key:"componentDidUpdate",value:function(e){this.props.map!==e.map||this.props.position!==e.position?this.renderMarker():this.props.visible!==e.visible&&(this.props.visible?this.marker.setMap(this.props.map):this.marker.setMap(null))}},{key:"renderMarker",value:function(){var e=this,t=this.props,n=t.position,a=t.mapCenter,o=t.map,i=t.visible,r=t.onCreate,c=n||a,l={map:i?o:null,position:n=new window.google.maps.LatLng(c)};this.marker=new window.google.maps.Marker(l),r&&r(this.props,this.marker),f.forEach(function(t){e.marker.addListener(t,e.handleEvent(t))})}},{key:"handleEvent",value:function(e){var t=this;return function(n){var a="on".concat(m(e));t.props[a]&&t.props[a](t.props,t.marker,n)}}},{key:"render",value:function(){return null}}]),t}(a.Component),p=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.map!==e.map&&this.renderInfoWindow(),this.props.visible===e.visible&&this.props.marker===e.marker||(this.props.visible?this.openWindow():this.closeWindow()),this.props.venueInfo!==e.venueInfo&&this.props.onDomready(this.props)}},{key:"openWindow",value:function(){this.infoWindow&&this.infoWindow.open(this.props.map,this.props.marker)}},{key:"closeWindow",value:function(){this.infoWindow&&this.infoWindow.close()}},{key:"renderInfoWindow",value:function(){var e=this;if(this.infoWindow=new window.google.maps.InfoWindow({content:'<div id="info-window-content"></div>'}),this.infoWindow){["domready","closeclick"].forEach(function(t){e.infoWindow.addListener(t,e.handleEvent(t))})}}},{key:"handleEvent",value:function(e){var t=this;return function(n){var a="on".concat(m(e));t.props[a]&&t.props[a](t.props,t.marker,n)}}},{key:"render",value:function(){return null}}]),t}(a.Component),h=n(7),b=n.n(h),k=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.clientId,a=e.venueInfo;return o.a.createElement("div",{className:"place-detail"},t&&o.a.createElement("h2",null,o.a.createElement("a",{href:a.canonicalUrl+"?ref=".concat(n),target:"blank"},a.name||t.name)),a.error&&o.a.createElement("span",null,"Details could not be loaded."),!a.name&&!a.error&&o.a.createElement("span",null,"Loading detail..."),a.name&&o.a.createElement("div",{id:"venue-info"},a.location&&a.location.formattedAddress&&o.a.createElement("div",{id:"address"},o.a.createElement("label",{htmlFor:"venue-address"},"Address:"),o.a.createElement("div",{id:"venue-address"},a.location.formattedAddress.join(", "))),o.a.createElement("img",{className:"attribution-logo-small",alt:"Foursquare attribution logo",src:b.a})))}}]),t}(a.Component),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={bounds:{}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onInfoWindowReady",value:function(){var e=document.getElementById("info-window-content");e&&r.a.render(o.a.createElement(k,{location:this.location,venueInfo:this.venueInfo,clientId:this.clientId}),e)}},{key:"render",value:function(){var e=this.props,t=e.locations,n=e.map,a=e.onMarkerClick,i=e.mapCenter,r=e.activeMarker,c=e.showInfoWindow,l=e.activeLocation,s=e.onInfoWindowClose,u=e.onMarkerCreated,d=e.venueInfo,m=e.clientId;return o.a.createElement("div",{id:"map",className:"map-view","aria-label":"Map of Harry Potter film locations in UK",role:"application"},o.a.createElement("div",{className:"map-error"},"Map could not be loaded"),t.map(function(e){return o.a.createElement(v,{visible:e.visible,key:e.id,map:n,mapCenter:i,position:e.position,location:e,onClick:a,onCreate:u})}),o.a.createElement(p,{marker:r,map:n,visible:c,location:l,onDomready:this.onInfoWindowReady,onCloseclick:s,venueInfo:d,clientId:m}))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={focusedItem:n.props.activeLocation?n.props.activeLocation.id:""},n.onListFocus=function(){if(""===n.state.focusedItem){var e=document.getElementById(n.props.id).querySelector('[role="option"]');n.setState({focusedItem:e.id})}},n.onListBlur=function(e){n.setState({focusedItem:""})},n.onKeyDown=function(e){var t=38,a=40,o=32,i=13,r=document.getElementById(n.state.focusedItem);switch(e.keyCode){case a:r.nextSibling&&n.setState({focusedItem:r.nextSibling.id}),e.preventDefault();break;case t:r.previousSibling&&n.setState({focusedItem:r.previousSibling.id}),e.preventDefault();break;case o:case i:n.props.itemClick(n.state.focusedItem)}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setActiveItemFocus()}},{key:"componentDidUpdate",value:function(e,t){t.focusedItem!==this.state.focusedItem&&this.setActiveItemFocus()}},{key:"setActiveItemFocus",value:function(){if(this.state.focusedItem){var e=document.getElementById(this.state.focusedItem);e.focus(),e.scrollIntoView({block:"nearest"})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,a=t.activeLocation,i=t.itemClick,r=t.id,c=this.state.focusedItem,l=a?a.id:"";return o.a.createElement("ul",{id:r,className:"list-view",role:"listbox",tabIndex:"0","aria-label":"Harry Potter film locations","aria-activedescendant":c,onFocus:this.onListFocus,onBlur:function(t){return e.onListBlur(t)},onKeyDown:function(t){return e.onKeyDown(t)}},n.map(function(e){var t=[];return e.id===c&&t.push("focused"),e.id===l&&t.push("list-view-selected"),e.visible&&o.a.createElement("li",{id:e.id,key:e.name,className:t.join(" "),onClick:function(){return i(e.id)},role:"option","aria-selected":l===e.id},e.name)}))}}]),t}(a.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onFilterSelect,a=e.options,i=e.title,r=e.id;return o.a.createElement("div",{className:"filter-container"},o.a.createElement("label",{className:"filter-label",htmlFor:r},i),o.a.createElement("select",{id:r,defaultValue:t,onChange:function(e){return n(e.target.value)}},o.a.createElement("option",{value:""},"Any"),a.map(function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.name)})))}}]),t}(a.Component),I=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"heading"},o.a.createElement("h1",null,this.props.title))}}]),t}(a.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,n,a=this.props,i=a.venueInfo,r=a.clientId,c=a.locationName,l=a.onCloseClick,s=a.movie,u=a.movies;if(i&&i.bestPhoto){var d=i.bestPhoto,m="".concat(d.prefix,"width300").concat(d.suffix),f="".concat(d.prefix,"original").concat(d.suffix);e=f,t="".concat(m," 1x, ").concat(f," 2x")}return s&&(n=s.length===u.length?"Featured in all Harry Potter movies":s.map(function(e){var t=u.findIndex(function(t){return e===t.value});return-1!==t?u[t].name:e}).join(", ")),o.a.createElement("section",{className:"detail-window"},o.a.createElement("header",{className:"detail-window-header"},i.name&&o.a.createElement("h2",null,o.a.createElement("a",{href:i.canonicalUrl+"?ref=".concat(r),target:"blank"},i.name||c)),i.error&&o.a.createElement("h2",null,c),o.a.createElement("button",{onClick:l,className:"close-detail"},"Close")),n&&o.a.createElement("div",{className:"location-movie"},"Movies: ",n),!i.name&&!i.error&&o.a.createElement("span",null,"Loading..."),i.error&&o.a.createElement("span",null,"Location detail could not be loaded"),e&&o.a.createElement("img",{src:e,srcSet:t,alt:i.name}),i.description&&o.a.createElement("p",null,i.description),i.contact&&i.contact.formattedPhone&&o.a.createElement("div",{id:"contact-info"},o.a.createElement("label",{htmlFor:"venue-contact"},"Contact:"),o.a.createElement("div",{id:"venue-contact"},i.contact.formattedPhone)),i.name&&o.a.createElement("img",{className:"attribution-logo",alt:"Foursquare attribution logo",src:b.a}))}}]),t}(a.Component),C=n(9),M=n.n(C),j=(n(17),{locations:[{name:"Australia House",position:{lat:51.51037,lng:-.12157},visible:!0,id:"4ad31fe9f964a52023e320e3",movie:[1]},{name:"King's Cross Station",position:{lat:51.530586,lng:-.12447212},visible:!0,id:"4af33684f964a520c7eb21e3",movie:[1,2,3,4,5,6,7,8]},{name:"Millennium Bridge",position:{lat:51.50947,lng:-.098558},visible:!0,id:"4ac518cef964a52022a620e3",movie:[6]},{name:"London City Hall",position:{lat:51.505238,lng:-.079039335},visible:!0,id:"4b460230f964a520131426e3",movie:[6]},{name:"Great Scotland Yard",position:{lat:51.506222,lng:-.126169},visible:!0,id:"547b6c2d498e3f5770072260",movie:[6]},{name:"Claremont Square",position:{lat:51.5308,lng:-.11031389},visible:!0,id:"51ea867e5019f55eb85cf0dd",movie:[5,7]},{name:"Piccadilly Circus",position:{lat:51.51001,lng:-.13459364},visible:!0,id:"4c9c6a059c48236a1cb14dee",movie:[7]},{name:"Leadenhall Market",position:{lat:51.51282,lng:-.08343618},visible:!0,id:"4ac518eff964a52062ad20e3",movie:[1]},{name:"Reptile House, London Zoo",position:{lat:51.535645,lng:-.15573978},visible:!0,id:"4dd912d3d1647fcf3e72035f",movie:[1]},{name:"St. Pancras Renaissance Hotel",position:{lat:51.529972,lng:-.125404},visible:!0,id:"4d00c69af1605481dce59fea",movie:[1]},{name:"Durham Cathedral",position:{lat:54.772405,lng:-1.576418},visible:!0,id:"4b6e9b65f964a520cbc32ce3",movie:[1,2,3]},{name:"Alnwick Castle",position:{lat:55.415726,lng:-1.7060995},visible:!0,id:"4b6eaf28f964a52080c62ce3",movie:[1,2]},{name:"Malham Cove",position:{lat:54.0607,lng:-2.1537},visible:!0,id:"4c0a77d27e3fc928cb9af382",movie:[7]},{name:"New College",position:{lat:51.754994,lng:-1.251768},visible:!0,id:"4beae24a4f5576b04435b396",movie:[4]},{name:"Lacock Abbey",position:{lat:51.414684,lng:-2.1212082},visible:!0,id:"4bf3cf3c6ba2b713362f8977",movie:[1,2]},{name:"Virginia Water",position:{lat:51.410316,lng:-.592274},visible:!0,id:"4b5c6295f964a5207b2d29e3",movie:[3,4]},{name:"Goathland Train Station",position:{lat:54.405403,lng:-.696376},visible:!0,id:"4c7e554701589521cbcd0863",movie:[1]},{name:"Ashridge Wood",position:{lat:51.418987,lng:-.825477},visible:!0,id:"4baf73c3f964a520eb003ce3",movie:[4]},{name:"Seven Sisters Country Park",position:{lat:50.771173,lng:.165405},visible:!0,id:"4bc9a7290687ef3b2e3bdacc",movie:[4]},{name:"Hardwick Hall",position:{lat:53.1665647314269,lng:-1.30997173157461},visible:!0,id:"4bc089b7abf495219259bf93",movie:[7,8]},{name:"Gloucester Cathedral",position:{lat:51.866571,lng:-2.246986},visible:!0,id:"4b8a755ff964a520946d32e3",movie:[1,2,3]}],movies:[{value:1,name:"Harry Potter and the Philosopher's Stone"},{value:2,name:"Harry Potter and the Chamber of Secrets"},{value:3,name:"Harry Potter and the Prisoner of Azkaban"},{value:4,name:"Harry Potter and the Goblet of Fire"},{value:5,name:"Harry Potter and the Order of the Phoenix"},{value:6,name:"Harry Potter and the Half-Blood Prince"},{value:7,name:"Harry Potter and the Deathly Hallows Part 1"},{value:8,name:"Harry Potter and the Deathly Hallows Part 2"}]});var O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={map:null,mapCenter:{lat:52.06002,lng:-1.34045},filterValue:"",activeMarker:null,activeLocation:null,venueInfo:{},showInfoWindow:!0,scrollItemToView:!1,movies:j.movies,locations:j.locations},n.clientId="LXGA0JVZIPS4YMLFKR51V5KEFQJZ4ILY33LW4J4RTZQBLT42",n.clientSecret="LNSDFUA5TWGXOQRM45LB44W4R1KWL0QI25R4YOHP1AFYNLER",n.renderMap=function(){!function(e){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.src=e,n.async=!0,n.defer=!0,n.innerHTML='function gm_authFailure() {alert("map auth fail")}',t.parentNode.insertBefore(n,t)}("https://maps.googleapis.com/maps/api/js?v=3&key=".concat("AIzaSyDMPqq_XkqrIrZ2aMM34Ovk-DC-9GpCuxY","&callback=initMap")),window.initMap=n.initMap},n.initMap=function(){var e=new window.google.maps.Map(document.getElementById("map"),{center:n.state.mapCenter,zoom:14});e.addListener("click",n.clearActiveMarker),n.setMapBounds(e),n.setState({map:e})},n.setMapBounds=function(e){var t=new window.google.maps.LatLngBounds;n.state.locations.forEach(function(e){t.extend(e.position)}),e.fitBounds(t)},n.updateFilterValue=function(e){n.setState(function(t){var n=t.locations;return n.forEach(function(t){t.visible=""===e||t.movie.includes(parseInt(e))}),{filterValue:e,locations:n}})},n.onMarkerClick=function(e,t){var a=n.state.activeMarker;n.setMarkerActive(a,!1),n.setState({venueInfo:{},activeMarker:t,showInfoWindow:!0,activeLocation:e.location,scrollItemToView:!0}),n.setMarkerActive(t,!0),n.fetchLocationDetail(e.location.id)},n.clearActiveMarker=function(){var e=n.state.activeMarker;n.setMarkerActive(e,!1),n.setState({activeMarker:null,activeLocation:null,showInfoWindow:!1,scrollItemToView:!1})},n.onListItemClick=function(e){var t=n.state.locations,a=t.findIndex(function(t){return t.id===e});if(-1!==a){var o=t[a];n.onMarkerClick({location:o},o.marker)}n.setState({scrollItemToView:!1}),n.fetchLocationDetail(e)},n.setMarkerActive=function(e,t){e&&(t?(n.toogleMarkerBounce(e,!0),n.setMarkerIcon(e,!0),n.state.map.setCenter(e.getPosition())):(n.toogleMarkerBounce(e,!1),n.setMarkerIcon(e,!1)))},n.toogleMarkerBounce=function(e,t){t?e.setAnimation(window.google.maps.Animation.BOUNCE):null!==e.getAnimation()&&e.setAnimation(null)},n.onMarkerCreated=function(e,t){var a=e.location;n.setState(function(e){var n=e.locations,o=n.findIndex(function(e){return e.id===a.id});return-1!==o&&(n[o].marker=t),{locations:n}})},n.fetchLocationDetail=function(e){var t="https://api.foursquare.com/v2/venues/".concat(e,"?client_id=").concat(n.clientId,"&client_secret=").concat(n.clientSecret,"&v=20181015");fetch(t).then(function(e){return e&&e.ok?e.json():{meta:999}}).then(function(e){e&&e.meta&&200===e.meta.code?n.setState({venueInfo:e.response.venue}):n.setState({venueInfo:{error:!0}})}).catch(function(e){return n.setState({venueInfo:{error:!0}})})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.renderMap()}},{key:"setMarkerIcon",value:function(e,t){t?e.setIcon(M.a):e.setIcon(null)}},{key:"render",value:function(){var e=this.state,t=e.locations,n=e.filterValue,a=e.showInfoWindow,i=e.scrollItemToView,r=e.activeMarker,c=e.activeLocation,l=e.mapCenter,s=e.map,u=e.movies,d=e.venueInfo;return o.a.createElement("div",{className:"App"},o.a.createElement(I,{title:"Harry Potter Films' Locations"}),o.a.createElement("main",{className:"content"},o.a.createElement(g,{map:s,locations:t,onMarkerClick:this.onMarkerClick,onMarkerCreated:this.onMarkerCreated,onInfoWindowClose:this.clearActiveMarker,mapCenter:l,activeMarker:r,activeLocation:c,venueInfo:d,showInfoWindow:a,clientId:this.clientId}),!c&&o.a.createElement("div",{className:"list"},o.a.createElement(y,{id:"location-filter",title:"Filter by Movie",value:n,onFilterSelect:this.updateFilterValue,options:u}),o.a.createElement(w,{locations:t,activeLocation:c,itemClick:this.onListItemClick,scrollToView:i,id:"locations-list"})),c&&o.a.createElement(E,{venueInfo:d,clientId:this.clientId,locationName:c?c.name:"",movie:c?c.movie:"",movies:u,onCloseClick:this.clearActiveMarker})))}}]),t}(a.Component),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,t){navigator.serviceWorker.register(e).then(function(e){navigator.serviceWorker.addEventListener("fetch",function(e){console.log("fetch")}),e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(O,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/harry-potter-film-locations",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/harry-potter-film-locations","/service-worker.js");L?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):S(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ"),e.onReady()})):S(t,e)})}}({onReady:function(){console.log("service worker ready")},onSuccess:function(e){console.log("service worker registration success")},onUpdate:function(e){console.log("service worker updated")}})}],[[10,2,1]]]);
//# sourceMappingURL=main.ee0588e2.chunk.js.map